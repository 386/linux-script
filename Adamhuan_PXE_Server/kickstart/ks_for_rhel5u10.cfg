# Kickstart file automatically generated by anaconda.

# Install OS Instead of upgrade
install

# Use NFS Installation media
nfs --server=192.168.184.132 --dir=/addition_storage/media_store/os/linux/rhel/RHEL5/64/

# About Keyborad
key --skip
keyboard us

# System Language
lang en_US.UTF-8

# X Window System Configuration Info
xconfig  --defaultdesktop=GNOME --depth=32 --resolution=1024x768

# Use graphical Install
graphical

# No firewall
#firewall --enabled --port=22:tcp
firewall --disabled

# System authorization Info
authconfig --useshadow --enablemd5

# No SELinux
#selinux --enforcing
selinux --disabled

# Timezone is Asia China Shanghai
#timezone --utc America/Los_Angeles
timezone --isUtc Asia/Shanghai

# System bootloader Configuration
bootloader --location=mbr --driveorder=sda --append="rhgb quiet"

# Network Info
network --bootproto=dhcp --device=eth0 --onboot=on --hostname cobbler-server --nameserver 114.114.114.114 --netmask 255.255.255.0 --gateway 192.168.184.2

# Reboot after install
reboot

# Root Password
rootpw --iscrypted $1$o4AKX7/J$C8mSQkO75hKbv3WwS8LuL1

# The following is the partition information you requested
# Note that any partitions you deleted are not expressed
# here so unless you clear all partitions first, this is
# not guaranteed to work
clearpart --all --initlabel
part /boot --fstype ext3 --size=300
part / --fstype ext3 --size=3000 --grow
part swap --size=1000 --grow --maxsize=5952

# Clear the Master Boot Record
#zerombr
# Partition clearing info
#clearpart --all --initlabel

%packages
@X Window System
@GNOME Desktop Environment
@Graphical Internet
@Development Tools
python

%post --interpreter=/bin/bash
(
# Linux Service
chkconfig sendmail off
echo "chkconfig:: Disable sendmail"

# YUM config
cat <<EOF > /etc/yum.repos.d/rhel5.repo
[Server]
name=Server
baseurl=ftp://192.168.184.132/media_store/os/linux/rhel/RHEL5/64/Server
gpgcheck=0

[VT]
name=VT
baseurl=ftp://192.168.184.132/media_store/os/linux/rhel/RHEL5/64/VT
gpgcheck=0

[Cluter]
name=Cluster
baseurl=ftp://192.168.184.132/media_store/os/linux/rhel/RHEL5/64/Cluster
gpgchech=0

[ClusterStorage]
name=ClusterStorage
baseurl=ftp://192.168.184.132/media_store/os/linux/rhel/RHEL5/64/ClusterStorage
gpgcheck=0

EOF

# YUM conf
sed -i 's/keepcache=0/keepcache=1/' /etc/yum.conf

) 2>&1 > /root/kickstart_post_script.log
